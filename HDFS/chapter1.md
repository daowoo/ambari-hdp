# HDFS的基本概念

## 数据块

* block的定义

HDFS上的文件被划分为块大小（默认64M）的多个分块（chunk），作为独立的存储单元。但是与其他文件系统不同的是，HDFS中小于一个块大小的文件不会占据整个块的空间。

* 最小化寻址

如果块设置得足够大，从磁盘传输数据的时间会明显大于定位这个块开始位置所需的时间，因而传输一个由多个块组成的文件的时间取决于磁盘传输速率。但是块大小也不能设置得过大，map任务通常一次只处理一个块中的数据，如果任务数少于集群中节点的数量，JOB的允许速度就会慢。

* 块抽象的好处

一个文件的大小可以大于网络中任意一个磁盘的容量，它可以利用集群上任意一个磁盘进行存储。

由于块大小是固定的，因此计算单个磁盘能存储多少个块就相对容易，块只是存储数据的一部分，而文件的元数据并不需要与块一同存储，其他系统可以单独管理这些元数据，从而大大简化了存储子系统的设计。

块还非常适合用于数据备份进而提供数据容错能力和提高可用性。将每个块复制到少数几个独立的机器上（复本），如果发现一个块不可用，系统会从其他地方读取另一个复本，这个过程对用户来说是透明的。并且系统会自动将因损坏或机器故障而丢失的块从其他候选地点复制到另一台正常的机器上，从而保证复本的数量恢复正常。

# Namenode和Datanode

namenode管理文件系统的命名空间，它维护文件系统树及整棵树内所有的文件和目录。这些信息以命名空间镜像文件和编辑日志文件的形式永久的保存在本地磁盘上。

namenode也记录着每个文件中各个块所在的数据节点信息，但它并不永久保存块的位置信息，这些信息会在系统启动时有数据节点重建。





